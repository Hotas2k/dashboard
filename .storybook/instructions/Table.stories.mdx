import { Meta } from '@storybook/addon-docs';

<Meta title="Instructions/Table" />

# Table

Using [TanStack Table v8](https://tanstack.com/table/v8).

## Basic table

```tsx
import { useCallback, useMemo } from 'react';

import { ColumnDef } from '@tanstack/react-table';
import { FormattedMessage } from 'react-intl';

import { ExamplesExampleFragment, useExamplesLazyQuery } from 'api/graphql';
import { BasicTable } from 'components/ui/table';
import { useTable } from 'hooks';
import { TableFetchDataVariables } from 'types/table';

const Component = () => {
  const [fetchExamples, { data, loading, error }] = useExamplesLazyQuery();
  const { getPageCount, getFetchDataVariables } = useTable();

  const columns = useMemo<ColumnDef<ExamplesExampleFragment>[]>(
    () => [
      {
        header: <FormattedMessage {...texts.firstName} />,
        accessorKey: 'firstName',
        accessorFn: ({ firstName, lastName }) => `${firstName} ${lastName}`,
      },
      {
        header: <FormattedMessage {...texts.id} />,
        accessorKey: 'id',
        enableSorting: false,
      },
    ],
    []
  );

  const handleFetchData = useCallback(
    (variables: TableFetchDataVariables) => {
      const { filter, sorting } = getFetchDataVariables(variables);
      fetchExamples({ variables: { filter, sorting } });
    },
    [fetchExamples, getFetchDataVariables]
  );

  return (
    <BasicTable
      data={data?.examples.edges || []}
      columns={columns}
      onFetchData={handleFetchData}
      pagination
      loading={loading}
      error={error}
      sorting
      pageCount={getPageCount(data?.examples.meta)}
    />
  );
};
```
